#!/usr/bin/env python3

import argparse
import os
import mergeinator
from mergeinator import WHT,NORMAL

if __name__ == "__main__":
    parser = argparse.ArgumentParser(description='Merginator')
    parser.add_argument('source', help="Merge source (will be trimmed away)")
    parser.add_argument("destination", help="Merge destination (unique results will end up here)")
    parser.add_argument("-n", "--dryrun", help="Don't change anything",
                        action="store_true", required=False)
    parser.add_argument("-y", "--yes", help="force answer of yes to questions.",
                        action="store_true", required=False)
    args = parser.parse_args()

    print(f"Source dir: {WHT}{args.source}{NORMAL}  ({os.path.abspath(args.source)})")
    print(f"Destination: {WHT}{args.destination}{NORMAL} ({os.path.abspath(args.destination)})\n")
    mergeinator.walk(args.source, args.destination, 0, yes_flag=args.yes, dry_run_flag=args.dryrun)
